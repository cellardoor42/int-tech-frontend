webpackJsonp([1],{"+VGo":function(t,e){},"/yRs":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(t=>t.default||t)(s("8ebl")),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"vue-street-view-pano-container"},[s("div",{ref:"vue-street-view-pano",staticClass:"vue-street-view-pano"}),t._t("default")],2)},o=[],n=s("XyMi");function r(t){s("IM09")}var l=!1,d=r,c=null,u=null,m=Object(n["a"])(i,a,o,l,d,c,u);e["default"]=m.exports},0:function(t,e,s){t.exports=s("NHnr")},1:function(t,e){},"27vG":function(t,e){},"2Jn3":function(t,e){},"2jyW":function(t,e){},"4+hh":function(t,e){},"5ZbH":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(t=>t.default||t)(s("hOwk")),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"vue-map-container"},[s("div",{ref:"vue-map",staticClass:"vue-map"}),s("div",{staticClass:"vue-map-hidden"},[t._t("default")],2),t._t("visible")],2)},o=[],n=s("XyMi");function r(t){s("oogg")}var l=!1,d=r,c=null,u=null,m=Object(n["a"])(i,a,o,l,d,c,u);e["default"]=m.exports},"5cLx":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(t=>t.default||t)(s("WgA/")),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{ref:"flyaway"},[t._t("default")],2)])},o=[],n=s("XyMi"),r=!1,l=null,d=null,c=null,u=Object(n["a"])(i,a,o,r,l,d,c);e["default"]=u.exports},"5fHR":function(t,e){},"6MY9":function(t,e,s){"use strict";s.d(e,"a",function(){return i}),s.d(e,"b",function(){return a});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",[s("span",{domProps:{textContent:t._s(t.label)}}),s("input",{ref:"input",class:t.className,attrs:{type:"text",placeholder:t.placeholder}})])},a=[]},IM09:function(t,e){},KBjH:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("/5sW"),a=s("8+8L"),o=s("NYxO");i["default"].use(o["a"]);var n={httpConfig:{host:"https://pure-river-78957.herokuapp.com",movies:"/movies",users:"/users",userRoles:"/user_roles",login:"/login"},user:null,userRole:0,currentRoute:"/",logoutDialog:!1,detailsMovieId:null},r=new o["a"].Store({state:n}),l={name:"app",data:function(){return{showLogoutDialog:!1}},computed:{logoutDialog:function(){return r.state.logoutDialog}},watch:{logoutDialog:function(t,e){this.showLogoutDialog=t}},created:function(){var t=this;this.$material.theming.theme="custom";var e=this.$cookie.get("token");if(null!==e){var s=r.state.httpConfig.host+r.state.httpConfig.login+"/"+e;this.$http.post(s,{}).then(function(e){console.log(e.body);var s={username:e.body.username,password:e.body.password};t.login(JSON.stringify(s))})}},methods:{cancelLogout:function(){this.showLogoutDialog=!1,r.state.logoutDialog=!1}}},d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view"),s("md-dialog-confirm",{attrs:{"md-active":t.showLogoutDialog,"md-title":"Выход","md-content":"Вы действительно хотите выйти?","md-confirm-text":"Да","md-cancel-text":"Отмена"},on:{"update:mdActive":function(e){t.showLogoutDialog=e},"md-cancel":function(e){t.cancelLogout()},"md-confirm":function(e){t.logout()}}})],1)},c=[],u=s("XyMi");function m(t){s("+VGo")}var v=!1,p=m,h=null,f=null,g=Object(u["a"])(l,d,c,v,p,h,f),_=g.exports,b=s("/ocq"),C=(s("qwQ3"),{name:"HomeComponent",data:function(){return{movies:[],favs:[],loginBtnTitle:"",search:"",exSearch:!1,exQuery:{director:"",genre:[],year:""},exQueryString:""}},computed:{user:function(){return r.state.user},userRole:function(){return r.state.userRole}},watch:{user:function(t,e){this.favs=t.favIds},userRole:function(t,e){0===t?this.loginBtnTitile="Вход":this.loginBtnTitle="Выход"}},created:function(){switch(r.state.userRole){case 0:this.loginBtnTitle="Вход";break;default:this.loginBtnTitle="Выход";break}null!==r.state.user&&(this.favs=r.state.user.favIds)},methods:{getMovies:function(){var t=this;if(""===this.search&&""===this.exQueryString)this.movies=[];else{var e=r.state.httpConfig.host+r.state.httpConfig.movies+"?title="+this.search+this.exQueryString;this.$http.get(e).then(function(e){t.movies=e.body,console.log(t.movies)})}},setContextQuery:function(){var t=this;setTimeout(function(){t.getMovies()},500)},resetContextQuery:function(){this.search="",this.movies=[]},setExQuery:function(){for(var t in this.exQueryString="",this.exQuery)this.exQuery.hasOwnProperty(t)&&this.exQuery[t].length>0&&(this.exQueryString+="&"+t+"="+this.exQuery[t]);console.log(this.exQueryString),this.getMovies()},resetExQuery:function(){this.exQueryString="",this.exQuery={director:"",genre:[],year:""},this.getMovies()},loginHook:function(){0===r.state.userRole?this.$router.push("/login"):(this.loginBtnTitile="Вход",this.logoutHook())}}}),w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper",attrs:{id:"index-wrapper"}},[s("md-toolbar",[s("span",{staticClass:"md-title"},[t._v("Hollywood | Домашняя страница")]),s("div",{staticClass:"md-toolbar-section-end"},[s("md-button",{on:{click:function(e){t.loginHook()}}},[t._v(t._s(t.loginBtnTitle))])],1)]),s("md-card",{staticClass:"content-card",attrs:{id:"search-card"}},[s("md-field",[s("md-icon",[t._v("search")]),s("label",[t._v("Поиск")]),s("md-input",{on:{keyup:function(e){t.setContextQuery()}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),""!==t.search?s("md-button",{staticClass:"md-icon-button md-dense",on:{click:function(e){t.resetContextQuery()}}},[s("md-icon",[t._v("clear")])],1):t._e()],1),s("md-button",{staticClass:"md-raised md-primary",on:{click:function(e){t.exSearch=!t.exSearch}}},[t._v("Расширенный поиск")]),t.exSearch?s("div",{attrs:{id:"exsearch-wrapper"}},[s("md-field",[s("label",[t._v("Режиссер")]),s("md-input",{model:{value:t.exQuery.director,callback:function(e){t.$set(t.exQuery,"director",e)},expression:"exQuery.director"}})],1),s("md-field",[s("label",{attrs:{for:"genre"}},[t._v("Жанр")]),s("md-select",{attrs:{name:"genre",id:"genre",multiple:""},model:{value:t.exQuery.genre,callback:function(e){t.$set(t.exQuery,"genre",e)},expression:"exQuery.genre"}},[s("md-option",{attrs:{value:"драма"}},[t._v("драма")]),s("md-option",{attrs:{value:"комедия"}},[t._v("комедия")]),s("md-option",{attrs:{value:"мелодрама"}},[t._v("мелодрама")]),s("md-option",{attrs:{value:"фантастика"}},[t._v("фантастика")]),s("md-option",{attrs:{value:"триллер"}},[t._v("триллер")]),s("md-option",{attrs:{value:"ужасы"}},[t._v("ужасы")]),s("md-option",{attrs:{value:"криминал"}},[t._v("криминал")]),s("md-option",{attrs:{value:"детектив"}},[t._v("детектив")])],1)],1),s("md-field",[s("label",[t._v("Год")]),s("md-input",{model:{value:t.exQuery.year,callback:function(e){t.$set(t.exQuery,"year",e)},expression:"exQuery.year"}})],1),s("md-button",{on:{click:function(e){t.resetExQuery()}}},[t._v("Сбросить")]),s("md-button",{on:{click:function(e){t.setExQuery()}}},[t._v("Применить")])],1):t._e(),t.movies.length>0?s("md-list",{staticClass:"md-triple-line"},t._l(t.movies,function(e){return s("md-list-item",[s("md-avatar",[s("img",{attrs:{src:e.posterUrl,alt:"poster"},on:{click:function(s){t.goToMovieDetails(e._id)}}})]),s("div",{staticClass:"md-list-item-text",on:{click:function(s){t.goToMovieDetails(e._id)}}},[s("span",[t._v(t._s(e.title))]),s("span",[s("b",[t._v("Режиссер:")]),t._v(" "+t._s(e.director))]),s("p",[s("b",[t._v("Жанр: ")]),t._l(e.genre,function(i,a){return s("label",[t._v(t._s(i)),a<e.genre.length-1?s("label",[t._v(", ")]):t._e()])})],2)]),0!==t.userRole?s("md-button",{staticClass:"md-icon-button md-list-action",on:{click:function(s){t.addToFavs(e._id)}}},[t.favs.includes(e._id)?t._e():s("md-icon",{staticClass:"md-primary"},[t._v("star_outline")]),t.favs.includes(e._id)?s("md-icon",{staticClass:"md-primary"},[t._v("star")]):t._e()],1):t._e()],1)})):t._e()],1),0===t.userRole?s("div",{attrs:{id:"guest-index-cards-wrapper"}},[s("router-link",{attrs:{to:"/popular"}},[s("md-card",{staticClass:"index-card",attrs:{"md-with-hover":""}},[s("md-card-header",[s("md-card-header-text",[s("div",{staticClass:"md-title"},[t._v("Популярные фильмы")]),s("div",{staticClass:"md-subhead"},[t._v("Топ 10")])]),s("md-card-media",{attrs:{"md-medium":""}},[s("md-icon",{staticClass:"md-size-5x"},[t._v("local_movies")])],1)],1)],1)],1)],1):s("div",{attrs:{id:"index-cards-wrapper"}},[s("router-link",{attrs:{to:"/popular"}},[s("md-card",{staticClass:"index-card",attrs:{"md-with-hover":""}},[s("md-card-header",[s("md-card-header-text",[s("div",{staticClass:"md-title"},[t._v("Популярные фильмы")]),s("div",{staticClass:"md-subhead"},[t._v("Топ 10")])]),s("md-card-media",{attrs:{"md-medium":""}},[s("md-icon",{staticClass:"md-size-5x"},[t._v("local_movies")])],1)],1)],1)],1),s("router-link",{attrs:{to:"/favourites"}},[s("md-card",{staticClass:"index-card",attrs:{"md-with-hover":""}},[s("md-card-header",[s("md-card-header-text",[s("div",{staticClass:"md-title"},[t._v("Мои фильмы")]),s("div",{staticClass:"md-subhead"},[t._v("Оценки и просмотры")])]),s("md-card-media",{attrs:{"md-medium":""}},[s("md-icon",{staticClass:"md-size-5x"},[t._v("stars")])],1)],1)],1)],1),s("router-link",{attrs:{to:"/profile"}},[s("md-card",{staticClass:"index-card",attrs:{"md-with-hover":""}},[s("md-card-header",[s("md-card-header-text",[s("div",{staticClass:"md-title"},[t._v("Мой профиль")]),s("div",{staticClass:"md-subhead"},[t._v("Личный кабинет")])]),s("md-card-media",{attrs:{"md-medium":""}},[s("md-icon",{staticClass:"md-size-5x"},[t._v("person")])],1)],1)],1)],1)],1)],1)},y=[];function x(t){s("27vG")}var k=!1,D=x,R=null,T=null,$=Object(u["a"])(C,w,y,k,D,R,T),M=$.exports,I={name:"PopularMoviesComponent",data:function(){return{loginBtnTitle:"",movies:[],favs:[]}},computed:{user:function(){return r.state.user},userRole:function(){return r.state.userRole}},watch:{user:function(t,e){this.favs=t.favIds},userRole:function(t,e){this.loginBtnTitle=0===t?"Вход":"Выход"}},created:function(){switch(r.state.userRole){case 0:this.loginBtnTitile="Вход";break;default:this.loginBtnTitile="Выход"}null!==r.state.user&&(this.favs=r.state.user.favIds)},mounted:function(){var t=this;this.$http.get(r.state.httpConfig.host+r.state.httpConfig.movies+"?rating=10").then(function(e){t.movies=e.body})},methods:{loginHook:function(){0===r.state.userRole?this.$router.push("/login"):(this.loginBtnTitile="Вход",this.logoutHook())}}},B=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper",attrs:{id:"popular-wrapper"}},[s("md-toolbar",[s("span",{staticClass:"md-title"},[t._v("Hollywood | Популярные фильмы")]),s("div",{staticClass:"md-toolbar-section-end"},[s("router-link",{attrs:{to:"/"}},[s("md-button",[t._v("На главную")])],1),s("md-button",{on:{click:function(e){t.loginHook()}}},[t._v(t._s(t.loginBtnTitile))])],1)]),s("md-card",{staticClass:"content-card"},[s("h1",{staticClass:"md-display-2"},[t._v("10 звезд")]),s("span",{staticClass:"md-title"},[t._v("Рейтинг самых популярных фильмов")]),t.movies.length>0?s("md-list",{staticClass:"md-triple-line"},t._l(t.movies,function(e){return s("md-list-item",[s("md-avatar",{on:{click:function(s){t.goToMovieDetails(e._id)}}},[s("img",{attrs:{src:e.posterUrl,alt:"poster"}})]),s("div",{staticClass:"md-list-item-text",on:{click:function(s){t.goToMovieDetails(e._id)}}},[s("span",[t._v(t._s(e.title))]),s("span",[s("b",[t._v("Режиссер:")]),t._v(" "+t._s(e.director))]),s("p",[s("b",[t._v("Жанр: ")]),t._l(e.genre,function(i,a){return s("label",[t._v(t._s(i)),a<e.genre.length-1?s("label",[t._v(", ")]):t._e()])})],2)]),0!==t.userRole?s("md-button",{staticClass:"md-icon-button md-accent md-list-action",on:{click:function(s){t.addToFavs(e._id)}}},[t.favs.includes(e._id)?t._e():s("md-icon",{staticClass:"md-primary"},[t._v("star_outline")]),t.favs.includes(e._id)?s("md-icon",{staticClass:"md-primary"},[t._v("star")]):t._e()],1):t._e()],1)})):t._e()],1)],1)},H=[];function O(t){s("slfv")}var Q=!1,S=O,j=null,P=null,E=Object(u["a"])(I,B,H,Q,S,j,P),L=E.exports,N={name:"MyFavouritesComponent",data:function(){return{loginBtnTitle:"",movies:[],favs:[],showDialog:!1,movieId:null}},computed:{userRole:function(){return r.state.userRole}},watch:{userRole:function(t,e){this.loginBtnTitle=0===t?"Вход":"Выход"}},created:function(){switch(r.state.userRole){case 0:this.loginBtnTitle="Вход";break;default:this.loginBtnTitle="Выход"}null!==r.state.user&&(this.favs=r.state.user.favIds),this.getMovies()},methods:{getMovies:function(){var t=this;this.movies=[];for(var e=0;e<r.state.user.favIds.length;e++){var s=r.state.user.favIds[e],i=r.state.httpConfig.host+r.state.httpConfig.movies+"/"+s;this.$http.get(i).then(function(e){t.movies.push(e.body)})}},loginHook:function(){0===r.state.userRole?this.$router.push("/login"):(this.loginBtnTitle="Вход",this.logoutHook(),this.$router.push("/"))},addToFavsHook:function(t){this.movieId=t,this.showDialog=!0},onConfirm:function(){this.addToFavs(this.movieId),this.showDialog=!1,this.getMovies()},onCancel:function(){this.showDialog=!1}}},U=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper",attrs:{id:"my-wrapper"}},[s("md-toolbar",[s("span",{staticClass:"md-title"},[t._v("Hollywood | Мои фильмы")]),s("div",{staticClass:"md-toolbar-section-end"},[s("router-link",{attrs:{to:"/"}},[s("md-button",[t._v("На главную")])],1),s("md-button",{on:{click:function(e){t.loginHook()}}},[t._v(t._s(t.loginBtnTitle))])],1)]),s("md-card",{staticClass:"content-card"},[s("h1",{staticClass:"md-display-2"},[t._v("Мои фильмы")]),s("span",{staticClass:"md-title"},[t._v("Избранное")]),0===t.movies.length?s("div",{staticStyle:{"text-align":"center",padding:"50px 0 70px 0"}},[s("p",{staticClass:"md-headline"},[t._v("Список вашего избранного пуст")]),s("p",{staticClass:"md-caption"},[t._v("Воспользуйтесь поиском, чтобы найти фильмы, которые могут вам понравиться")]),s("md-button",{staticClass:"md-raised md-accent",attrs:{to:"/"}},[t._v("Вернуться на главную")])],1):t._e(),t.movies.length>0?s("md-list",{staticClass:"md-triple-line"},t._l(t.movies,function(e){return s("md-list-item",{staticClass:"list-item"},[s("md-avatar",{on:{click:function(s){t.goToMovieDetails(e._id)}}},[s("img",{attrs:{src:e.posterUrl,alt:"poster"}})]),s("div",{staticClass:"md-list-item-text",on:{click:function(s){t.goToMovieDetails(e._id)}}},[s("span",[t._v(t._s(e.title))]),s("span",[s("b",[t._v("Режиссер:")]),t._v(" "+t._s(e.director))]),s("p",[s("b",[t._v("Жанр: ")]),t._l(e.genre,function(i,a){return s("label",[t._v(t._s(i)),a<e.genre.length-1?s("label",[t._v(", ")]):t._e()])})],2)]),0!==t.userRole?s("md-button",{staticClass:"md-icon-button md-list-action",on:{click:function(s){t.addToFavsHook(e._id)}}},[t.favs.includes(e._id)?t._e():s("md-icon",{staticClass:"md-primary"},[t._v("star_outline")]),t.favs.includes(e._id)?s("md-icon",{staticClass:"md-primary"},[t._v("star")]):t._e()],1):t._e()],1)})):t._e()],1),s("md-dialog-confirm",{attrs:{"md-active":t.showDialog,"md-title":"Удаление","md-content":"Вы уверены, что хотите удалить фильм из списка избранных?","md-confirm-text":"Подтвердить","md-cancel-text":"Отмена"},on:{"update:mdActive":function(e){t.showDialog=e},"md-cancel":t.onCancel,"md-confirm":t.onConfirm}})],1)},A=[];function F(t){s("egWY")}var G=!1,J=F,X=null,Y=null,q=Object(u["a"])(N,U,A,G,J,X,Y),z=q.exports,V={name:"DetailsComponent",data:function(){return{loginBtnTitle:"",movie:null,favs:[]}},computed:{userRole:function(){return r.state.userRole}},watch:{userRole:function(t,e){this.loginBtnTitle=0===t?"Вход":"Выход"}},created:function(){switch(r.state.userRole){case 0:this.loginBtnTitle="Вход";break;default:this.loginBtnTitle="Выход"}null!==r.state.user&&(this.favs=r.state.user.favIds)},mounted:function(){null!==r.state.detailsMovieId?this.getMovie():console.log("No id")},methods:{getMovie:function(){var t=this,e=r.state.httpConfig.host+r.state.httpConfig.movies+"/"+r.state.detailsMovieId;this.$http.get(e).then(function(e){t.movie=e.body})},loginHook:function(){0===r.state.userRole?this.$router.push("/login"):(this.loginBtnTitile="Вход",this.logoutHook())}}},W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper",attrs:{id:"details-wrapper"}},[s("md-toolbar",[s("span",{staticClass:"md-title"},[t._v("Hollywood | О фильме")]),s("div",{staticClass:"md-toolbar-section-end"},[s("router-link",{attrs:{to:"/"}},[s("md-button",[t._v("На главную")])],1),s("md-button",{on:{click:function(e){t.loginHook()}}},[t._v(t._s(t.loginBtnTitle))])],1)]),null!==t.movie?s("md-card",{staticClass:"content-card"},[s("h1",{staticClass:"md-display-2"},[t._v(t._s(t.movie.title)+"\n            "),0!==t.userRole?s("md-button",{staticClass:"md-icon-button md-fab md-accent",on:{click:function(e){t.addToFavs(t.movie._id)}}},[t.favs.includes(t.movie._id)?t._e():s("md-icon",{staticClass:"md-primary"},[t._v("star_outline")]),t.favs.includes(t.movie._id)?s("md-icon",{staticClass:"md-primary"},[t._v("star")]):t._e(),t.favs.includes(t.movie._id)?t._e():s("md-tooltip",{attrs:{"md-direction":"right"}},[t._v("Добавить в избранное")]),t.favs.includes(t.movie._id)?s("md-tooltip",{attrs:{"md-direction":"right"}},[t._v("Удалить из избранного")]):t._e()],1):t._e()],1),s("img",{staticClass:"poster",attrs:{src:t.movie.posterUrl}}),s("span",{staticClass:"md-subheading"},[s("b",[t._v("Режиссер: ")]),t._v(t._s(t.movie.director))]),s("br"),s("span",{staticClass:"md-subheading"},[s("b",[t._v("Жанр: ")])]),t._l(t.movie.genre,function(e,i){return s("span",{staticClass:"md-subheading"},[t._v(t._s(e)),i<t.movie.genre.length-1?s("span",[t._v(", ")]):t._e()])}),s("br"),s("span",{staticClass:"md-subheading"},[s("b",[t._v("Год: ")]),t._v(t._s(t.movie.year))]),s("br"),s("span",{staticClass:"md-body-1"},[t._v("Рейтинг по версии "),s("b",[t._v("Кинопоиска")]),t._v(":\n            "),t._l(t.movie.rating,function(e){return s("md-icon",[t._v("star")])}),s("b",[t._v(" ("+t._s(t.movie.rating)+")")])],2),s("br"),s("br"),s("span",{staticClass:"md-title"},[t._v("Сюжет")]),s("p",[t._v(t._s(t.movie.plot))])],2):s("md-card",[s("h1",{staticClass:"md-display-2"},[t._v("Фильм не найден")])])],1)},K=[];function Z(t){s("VOuw")}var tt=!1,et=Z,st=null,it=null,at=Object(u["a"])(V,W,K,tt,et,st,it),ot=at.exports,nt={name:"ProfileComponent",data:function(){return{loginBtnTitle:"",userData:{},username:"",password:"",passwordRepeat:"",role:"",letterPlaceholder:null,edit:!1,showPasswdDialog:!1,showConfirmDialog:!1,admin:!1,users:[],showDeleteDialog:!1,toDeleteId:null}},computed:{userRole:function(){return r.state.userRole}},watch:{userRole:function(t,e){switch(this.loginBtnTitle=0===t?"Вход":"Выход",t){case 0:this.role="гость";break;case 1:this.role="пользователь";break;case 2:this.role="администратор";break}}},created:function(){switch(r.state.userRole){case 0:this.loginBtnTitle="Вход",this.role="гость";break;case 1:this.loginBtnTitle="Выход",this.role="пользователь";break;case 2:this.loginBtnTitle="Выход",this.role="администратор",this.getUsers();break}null!==r.state.user&&(this.userData=r.state.user,this.letterPlaceholder=this.userData.username[0],this.username=this.userData.username,this.password=this.passwordRepeat=this.userData.password)},methods:{loginHook:function(){0===r.state.userRole?this.$router.push("/login"):(this.loginBtnTitile="Вход",this.logout(),this.$router.push("/"))},submitHook:function(){this.password!==this.passwordRepeat?this.showPasswdDialog=!0:this.showConfirmDialog=!0},submit:function(){var t=this,e=r.state.httpConfig.host+"/profile",s={userId:this.$cookie.get("token"),username:this.username,password:this.password};this.$http.post(e,s).then(function(e){console.log(e.data),t.userData.username=s.username,t.userData.password=s.password})},getUsers:function(){var t=this,e=r.state.httpConfig.host+"/users";this.$http.get(e).then(function(e){t.users=e.data})},deleteUser:function(){var t=this;console.log(this.toDeleteId);var e={userId:this.toDeleteId},s=r.state.httpConfig.host+"/delete_user";this.$http.post(s,JSON.stringify(e)).then(function(e){console.log(e),t.getUsers()})},deleteHook:function(t){this.showDeleteDialog=!0,this.toDeleteId=t},cancel:function(){this.toDeleteId=null,this.showDeleteDialog=!1}}},rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper",attrs:{id:"profile-wrapper"}},[s("md-toolbar",[s("span",{staticClass:"md-title"},[t._v("Hollywood | Личный кабинет")]),s("div",{staticClass:"md-toolbar-section-end"},[s("router-link",{attrs:{to:"/"}},[s("md-button",[t._v("На главную")])],1),s("md-button",{on:{click:function(e){t.loginHook()}}},[t._v(t._s(t.loginBtnTitle))])],1)]),s("md-card",{staticClass:"content-card",attrs:{id:"profile-card"}},[s("h1",{staticClass:"md-display-2"},[t._v("Мой профиль")]),s("md-list",[s("md-list-item",{staticClass:"profile-item"},[s("md-avatar",{staticClass:"md-avatar-icon md-large md-primary"},[s("md-ripple",[t._v(t._s(t.letterPlaceholder))])],1),s("div",{staticClass:"md-list-item-text"},[s("span",{staticClass:"md-title"},[t._v(t._s(t.userData.username))]),s("span",[s("b",[t._v("Статус: ")]),t._v(t._s(t.role))]),s("router-link",{attrs:{to:"/favourites"}},[s("span",{staticClass:"md-caption"},[t._v("Любибмых фильмов: "+t._s(t.userData.favIds.length))])])],1),s("md-button",{staticClass:"md-icon-button md-list-action",on:{click:function(e){t.edit=!t.edit}}},[s("md-icon",{staticClass:"md-primary"},[t._v("edit")])],1),2===t.userRole?s("md-button",{staticClass:"md-icon-button md-list-action",on:{click:function(e){t.admin=!t.admin}}},[s("md-icon",{staticClass:"md-primary"},[t._v("settings")])],1):t._e()],1)],1),t.edit?s("div",{staticStyle:{padding:"30px 10vw"}},[s("h1",{staticClass:"md-headline"},[t._v("Редактировать профиль")]),s("md-field",[s("label",[t._v("Имя")]),s("md-input",{model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),s("md-field",[s("label",[t._v("Пароль")]),s("md-input",{attrs:{type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),s("md-field",[s("label",[t._v("Повторите пароль")]),s("md-input",{attrs:{type:"password"},model:{value:t.passwordRepeat,callback:function(e){t.passwordRepeat=e},expression:"passwordRepeat"}})],1),s("div",{staticStyle:{"text-align":"right"}},[s("md-button",{staticClass:"md-raised md-primary",on:{click:function(e){t.submitHook()}}},[t._v("Сохранить изменения")])],1)],1):t._e()],1),t.admin?s("md-card",{staticClass:"content-card"},[s("h1",{staticClass:"md-display-2"},[t._v("Пользователи")]),s("span",{staticClass:"md-caption"},[s("b",[t._v("Статусы пользователей:")])]),s("br"),s("span",{staticClass:"md-caption"},[s("b",[s("i",[t._v("0")])]),t._v(" - гость")]),s("br"),s("span",{staticClass:"md-caption"},[s("b",[s("i",[t._v("1")])]),t._v(" - пользователь")]),s("br"),s("span",{staticClass:"md-caption"},[s("b",[s("i",[t._v("2")])]),t._v(" - администратор")]),s("br"),s("md-list",{staticClass:"md-double-line"},t._l(t.users,function(e){return s("md-list-item",[s("md-avatar",[s("md-icon",[t._v("person")])],1),s("div",{staticClass:"md-list-item-text"},[s("span",[t._v(t._s(e.username))]),s("span",[s("b",[t._v("Статус: ")]),t._v(t._s(e.role))])]),"2"!==e.role?s("md-button",{staticClass:"md-icon-button md-list-action",on:{click:function(s){t.deleteHook(e._id)}}},[s("md-icon",[t._v("clear")]),s("md-tooltip",{attrs:{"md-direction":"left"}},[t._v("Удалить пользователя")])],1):t._e()],1)})),s("md-dialog-confirm",{attrs:{"md-active":t.showDeleteDialog,"md-title":"Удалить","md-content":"Вы уверены, что хотите удалить этого пользователя? Отменить данное действие будет невозможно","md-confirm-text":"Удалить","md-cancel-text":"Отмена"},on:{"update:mdActive":function(e){t.showDeleteDialog=e},"md-cancel":function(e){t.cancel()},"md-confirm":function(e){t.deleteUser()}}})],1):t._e(),s("md-dialog-alert",{attrs:{"md-active":t.showPasswdDialog,"md-content":"Пароли не совпадают","md-confirm-text":"Закрыть"},on:{"update:mdActive":function(e){t.showPasswdDialog=e}}}),s("md-dialog-confirm",{attrs:{"md-active":t.showConfirmDialog,"md-title":"Редактировать профиль","md-content":"Сохранить изменения в ваших данных?","md-confirm-text":"ОК","md-cancel-text":"Отмена"},on:{"update:mdActive":function(e){t.showConfirmDialog=e},"md-cancel":function(e){t.showConfirmDialog=!1},"md-confirm":function(e){t.submit()}}})],1)},lt=[];function dt(t){s("2Jn3")}var ct=!1,ut=dt,mt=null,vt=null,pt=Object(u["a"])(nt,rt,lt,ct,ut,mt,vt),ht=pt.exports,ft={name:"LoginComponent",data:function(){return{username:"",password:""}},methods:{beforeLogin:function(){var t={username:this.username,password:this.password};this.login(JSON.stringify(t))}}},gt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper",attrs:{id:"login-wrapper"}},[s("div",{staticClass:"center-align login-wrapper"},[s("md-card",{attrs:{id:"login-card"}},[s("md-card-header",[s("div",{staticClass:"md-display-2"},[t._v("Вход")])]),s("md-card-content",[s("md-field",[s("label",[t._v("Логин")]),s("md-input",{attrs:{required:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),s("md-field",[s("label",[t._v("Пароль")]),s("md-input",{attrs:{type:"password",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),s("md-card-actions",[s("md-button",{staticClass:"md-raised md-primary",on:{click:function(e){t.beforeLogin()}}},[t._v("Войти")])],1),s("div",{staticStyle:{"text-align":"center","margin-top":"50px"}},[s("span",[t._v("Нет учетной записи?")]),s("br"),s("router-link",{attrs:{to:"/sign_up"}},[s("md-button",[t._v("Зарегистрироваться")])],1)],1)],1)],1),s("md-dialog-alert",{staticStyle:{display:"none"},attrs:{id:"errAlert","md-title":"Ошибка","md-content":"Не удалось войти в аккаунт. Проверьте корректность введенных данных","md-confirm-text":"ОК"}})],1)},_t=[];function bt(t){s("XTYl")}var Ct=!1,wt=bt,yt=null,xt=null,kt=Object(u["a"])(ft,gt,_t,Ct,wt,yt,xt),Dt=kt.exports,Rt={name:"SignUpComponent",data:function(){return{username:"",password:"",passwordRepeat:"",showPasswdDialog:!1}},methods:{submit:function(){var t=this;if(this.password!==this.passwordRepeat)this.showPasswdDialog=!0;else{var e=r.state.httpConfig.host+r.state.httpConfig.users,s={username:this.username,password:this.password};this.$http.post(e,s).then(function(e){console.log(e.data),t.$router.push("/login")})}}}},Tt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper",attrs:{id:"signup-wrapper"}},[s("div",{staticClass:"center-align signup-wrapper"},[s("md-card",{attrs:{id:"signup-card"}},[s("md-card-header",[s("div",{staticClass:"md-display-2"},[t._v("Регистрация")])]),s("md-card-content",[s("md-field",[s("label",[t._v("Логин")]),s("md-input",{model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),s("md-field",[s("label",[t._v("Пароль")]),s("md-input",{attrs:{type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),s("md-field",[s("label",[t._v("Повторите пароль")]),s("md-input",{attrs:{type:"password"},model:{value:t.passwordRepeat,callback:function(e){t.passwordRepeat=e},expression:"passwordRepeat"}})],1)],1),s("md-card-actions",[s("md-button",{staticClass:"md-raised md-primary",on:{click:function(e){t.submit()}}},[t._v("Зарегистрироваться")])],1),s("div",{staticStyle:{"text-align":"center","margin-top":"50px"}},[s("span",[t._v("Уже зарегистрированы?")]),s("br"),s("router-link",{attrs:{to:"/login"}},[s("md-button",[t._v("Войти")])],1)],1)],1)],1),s("md-dialog-alert",{attrs:{"md-active":t.showPasswdDialog,"md-content":"Пароли не совпадают","md-confirm-text":"Закрыть"},on:{"update:mdActive":function(e){t.showPasswdDialog=e}}})],1)},$t=[];function Mt(t){s("KBjH")}var It=!1,Bt=Mt,Ht=null,Ot=null,Qt=Object(u["a"])(Rt,Tt,$t,It,Bt,Ht,Ot),St=Qt.exports,jt={name:"NotFoundComponent",data:function(){return{center:{lat:34.090698,lng:-118.386002},markers:[{position:{lat:34.090698,lng:-118.386002}}]}}},Pt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper",attrs:{id:"not-found-wrapper"}},[s("div",{staticClass:"center-align"},[s("md-card",{attrs:{id:"not-found-card"}},[s("div",{staticClass:"center-align"},[s("h1",{staticClass:"md-display-3"},[t._v("404")]),s("md-card-content",[s("h2",[t._v("Запрашиваемая страница не найдена")])]),s("router-link",{attrs:{to:"/"}},[s("md-button",{staticClass:"md-raised md-primary"},[t._v("На домашнюю страницу")])],1),s("GmapMap",{staticStyle:{width:"30vw",height:"30vh",margin:"30px 0"},attrs:{center:{lat:34.090698,lng:-118.386002},zoom:7,"map-type-id":"terrain"}},t._l(t.markers,function(e,i){return s("GmapMarker",{key:i,attrs:{position:e.position,clickable:!0,draggable:!1},on:{click:function(s){t.center=e.position}}})}))],1)])],1)])},Et=[];function Lt(t){s("2jyW")}var Nt=!1,Ut=Lt,At=null,Ft=null,Gt=Object(u["a"])(jt,Pt,Et,Nt,Ut,At,Ft),Jt=Gt.exports;i["default"].use(b["a"]);var Xt=new b["a"]({routes:[{path:"/home",name:"home",component:M,meta:{title:"Домашняя страница"}},{path:"/popular",name:"popular",component:L,meta:{title:"Популярные фильмы"}},{path:"/favourites",name:"favourites",component:z,meta:{title:"Мои фильмы"}},{path:"/details",name:"details",component:ot,meta:{title:"О фильме"}},{path:"/profile",name:"profile",component:ht,meta:{title:"Профиль"}},{path:"/login",name:"login",component:Dt,meta:{title:"Вход"}},{path:"/sign_up",name:"signUp",component:St,meta:{title:"Регистрация"}},{path:"/",redirect:"/home"},{path:"*",component:Jt,meta:{title:"404"}}]}),Yt=s("K/Lq"),qt=s.n(Yt),zt=s("sA6N"),Vt=s("Lgyv"),Wt=s.n(Vt),Kt=(s("4+hh"),s("VLml"),s("5fHR"),s("gbyG"),s("Gh7F"),{methods:{goToMovieDetails:function(t){r.state.detailsMovieId=t,this.$router.push("/details")},addToFavs:function(t){if(void 0!==t){r.state.user.favIds.includes(t)?r.state.user.favIds.splice(r.state.user.favIds.indexOf(t),1):r.state.user.favIds.push(t),console.log(r.state.user.favIds);var e={userId:r.state.user._id,favIds:r.state.user.favIds},s=r.state.httpConfig.host+"/favs";this.$http.post(s,e).then(function(t){console.log(t.body)})}}}}),Zt={methods:{login:function(t){var e=this,s=r.state.httpConfig.host+r.state.httpConfig.login;this.$http.post(s,JSON.parse(t)).then(function(t){var s=t.body;""!==s?(r.state.user=t.body,r.state.userRole=parseInt(s.role),e.$cookie.set("token",s._id),e.$router.push(r.state.currentRoute)):(console.log("login err"),alert("ОШИБКА\nНе удалось войти в аккаунт. Проверьте правильность введенных данных и повторите попытку"))})},logoutHook:function(){r.state.logoutDialog=!0},logout:function(){console.log("LOGOUT"),this.$cookie.delete("token"),r.state.user=null,r.state.userRole=0,r.state.logoutDialog=!1,location.reload()},signUp:function(){console.log("SIGN UP")}}};i["default"].use(a["a"]),i["default"].use(Wt.a),i["default"].use(qt.a),i["default"].use(zt,{load:{key:"AIzaSyDn0MTdzjLn9-q9Nd_b3VMqZ9hCygPRPew",libraries:"places"}}),i["default"].mixin(Kt),i["default"].mixin(Zt),i["default"].config.productionTip=!1,i["default"].http.options.emulateJSON=!0,i["default"].http.options.crossOrigin=!0,i["default"].http.headers.common["Accept"]="application/json, text/plain, */*",Xt.afterEach(function(t,e,s){document.title=t.meta.title,"/login"!==t.path&&"/sign_up"!==t.path&&(r.state.currentRoute=t.path),console.log(r.state.currentRoute)}),new i["default"]({router:Xt,store:r,render:function(t){return t(_)}}).$mount("#app")},VLml:function(t,e){},VOuw:function(t,e){},XTYl:function(t,e){},YI6p:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("vFxn"),a=s.n(i);for(var o in i)"default"!==o&&function(t){s.d(e,t,function(){return i[t]})}(o);var n=s("6MY9"),r=s("XyMi"),l=!1,d=null,c=null,u=null,m=Object(r["a"])(a.a,n["a"],n["b"],l,d,c,u);e["default"]=m.exports},egWY:function(t,e){},oogg:function(t,e){},preG:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(t=>t.default||t)(s("hQTS")),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("input",{ref:"input",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.value}})},o=[],n=s("XyMi"),r=!1,l=null,d=null,c=null,u=Object(n["a"])(i,a,o,r,l,d,c);e["default"]=u.exports},slfv:function(t,e){}},[0]);
//# sourceMappingURL=app.82a95d92.js.map